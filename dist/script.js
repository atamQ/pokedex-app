// JavaScript Document
let pokemonRepository=function(){let e=[],o="https://pokeapi.co/api/v2/pokemon/?limit=20";function t(o){"object"==typeof o&&"name"in o&&"detailsUrl"in o?e.push(o):console.log("add object")}function a(e){let o=$(".modal-body"),t=$(".modal-title");t.empty(),o.empty();let a=$("<h1>"+e.name+"</h1><span class='sr-only'>"+e.name+"</span>"),s=$('<img class="modal-img" style="width:50%">');s.attr("src",e.imageUrlFront);let l=$('<img class="modal-img" style="width:50%">');l.attr("src",e.imageUrlBack);let n=$("<p>height : "+e.height+"</p>"),i=$("<p>weight : "+e.weight+"</p>"),c=$("<p>types : "+e.types+"</p>"),r=$("<p>abilities : "+e.abilities+"</p>");t.append(a),o.append(s),o.append(l),o.append(n),o.append(i),o.append(c),o.append(r)}return{add:t,getAll:function(){return e},addListItem:function(e){pokemonRepository.loadDetails(e).then(function(){let o=$(".row"),t=$('<div class="card" style="width:400px"></div>'),s=$('<img class="card-img-top" alt="Card image" style="width:20%" />');s.attr("src",e.imageUrlFront),e.name=e.name.toUpperCase();let l=$('<div class="card-body"></div>'),n=$("<h4 class='card-title' >"+e.name+"</h4>"),i=$('<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">See Profile</button>');o.append(t),t.append(s),t.append(l),l.append(n),l.append(i),i.on("click",function(){var o;o=e,pokemonRepository.loadDetails(o).then(function(){console.log(o),a(o)})})})},loadList:function(){return $.ajax(o).then(function(e){e.results.forEach(function(e){let o={name:e.name,detailsUrl:e.url};t(o),console.log(o)})}).catch(function(e){console.error(e)})},loadDetails:function(e){let o=e.detailsUrl;return $.ajax(o).then(function(o){e.imageUrlFront=o.sprites.front_default,e.imageUrlBack=o.sprites.back_default,e.height=o.height,e.types=[];for(var t=0;t<o.types.length;t++)e.types.push(o.types[t].type.name);e.types.includes("grass")?$(".modal-header").css("color","green"):e.types.includes("fire")?$(".modal-header").css("background-color","DarkOrange"):e.types.includes("psychic")?$(".modal-header").css("background-color","#FF69B4"):e.types.includes("poison")?$(".modal-header").css("background-color","#ef98f7"):e.types.includes("water")?$(".modal-header").css("background-color","#98a8f7"):e.types.includes("bug")?$(".modal-header").css("background-color","#3f000f"):e.types.includes("rock")?$(".modal-header").css("background-color","#BC8F8F"):e.types.includes("flying")?$(".modal-header").css("background-color","#2F4F4F"):e.types.includes("electric")?$(".modal-header").css("background-color","#f1f798"):e.types.includes("ice")?$(".modal-header").css("background-color","#4169E1"):e.types.includes("ghost")?$(".modal-header").css("background-color","#888888"):e.types.includes("ground")?$(".modal-header").css("background-color","#D2B48C"):e.types.includes("fairy")?$(".modal-header").css("background-color","#EE82EE"):e.types.includes("steel")&&$(".modal-header").css("background-color","#708090"),e.abilities=[];for(var a=0;a<o.abilities.length;a++)e.abilities.push(o.abilities[t].ability.name);e.weight=o.weight}).catch(function(e){console.error(e)})},showModal:a}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});